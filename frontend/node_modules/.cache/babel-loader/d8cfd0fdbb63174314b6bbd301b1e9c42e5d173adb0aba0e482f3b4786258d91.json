{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mapActions, mapState } from \"vuex\";\nexport default {\n  name: \"Cart\",\n  props: {\n    cart: Array\n  },\n  data() {\n    return {\n      productsInCart: [],\n      productIDs: [],\n      currCart: null,\n      totalPrice: 0,\n      userID: null\n    };\n  },\n  computed: {\n    ...mapState([\"token\", \"products\"])\n  },\n  created() {\n    this.currCart = this.cart;\n  },\n  methods: {\n    ...mapActions([\"getToken\", \"getCart\", \"removeProductFromCart\", \"getProduct\"]),\n    removeFromCart(productID, userID) {\n      let token = localStorage.token;\n      let payload = token.split(\".\")[1];\n      let user = JSON.parse(atob(payload));\n      this.currCart.forEach(el => {\n        if (el.productID == id) {\n          console.log(el.id);\n        }\n      });\n    }\n  },\n  mounted() {\n    let token = localStorage.token;\n    let payload = token.split(\".\")[1];\n    let user = JSON.parse(atob(payload));\n    this.currCart.forEach(el => {\n      this.productIDs.push(el.productID);\n    });\n    this.productIDs.forEach(el2 => {\n      this.products.forEach(prod => {\n        if (el2 == prod.id) {\n          if (!this.productsInCart.includes(prod)) {\n            this.productsInCart.push(prod);\n            this.totalPrice += prod.product_price;\n          }\n        }\n      });\n    });\n    this.userID = user.id;\n  }\n};","map":{"version":3,"mappings":";;AA4BA;AAEA;EACAA;EAEAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;MACA;MACA;QACA;UACAC;QACA;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;MACA;IACA;IACA;MACA;QACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IACA;EACA;AACA","names":["name","props","cart","data","productsInCart","productIDs","currCart","totalPrice","userID","computed","created","methods","removeFromCart","console","mounted"],"sourceRoot":"src/components","sources":["Cart.vue"],"sourcesContent":["<template>\n  <div>\n    <h4>Your cart:</h4>\n    <div id=\"cartDiv\">\n      <h3>Cart</h3>\n      <b-card v-for=\"product in productsInCart\" :key=\"product.id\">\n        <b-card-text>Name: {{ product.product_name }} Price: {{ product.product_price }} </b-card-text>\n        <b-card-text class=\"ms-auto\">\n          <b-button\n            v-if=\"product\"\n            pill\n            class=\"ms-auto\"\n            id=\"refBtn\"\n            variant=\"danger\"\n            @click=\"removeFromCart(product.id)\"\n            >Remove</b-button\n          >\n        </b-card-text>\n      </b-card>\n      <div id=\"totalDiv\">\n        <br />\n        <b> Total: {{ totalPrice }} </b>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState } from \"vuex\";\n\nexport default {\n  name: \"Cart\",\n\n  props: {\n    cart: Array,\n  },\n  data() {\n    return {\n      productsInCart: [],\n      productIDs: [],\n      currCart: null,\n      totalPrice: 0,\n      userID: null,\n    };\n  },\n  computed: {\n    ...mapState([\"token\", \"products\"]),\n  },\n  created() {\n    this.currCart = this.cart;\n  },\n  methods: {\n    ...mapActions([\"getToken\", \"getCart\", \"removeProductFromCart\", \"getProduct\"]),\n    removeFromCart(productID, userID) {\n      let token = localStorage.token;\n      let payload = token.split(\".\")[1];\n      let user = JSON.parse(atob(payload));\n      this.currCart.forEach((el) => {\n        if (el.productID == id) {\n          console.log(el.id);\n        }\n      });\n    },\n  },\n  mounted() {\n    let token = localStorage.token;\n    let payload = token.split(\".\")[1];\n    let user = JSON.parse(atob(payload));\n    this.currCart.forEach((el) => {\n      this.productIDs.push(el.productID);\n    });\n    this.productIDs.forEach((el2) => {\n      this.products.forEach((prod) => {\n        if (el2 == prod.id) {\n          if (!this.productsInCart.includes(prod)) {\n            this.productsInCart.push(prod);\n            this.totalPrice += prod.product_price;\n          }\n        }\n      });\n    });\n    this.userID = user.id;\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}