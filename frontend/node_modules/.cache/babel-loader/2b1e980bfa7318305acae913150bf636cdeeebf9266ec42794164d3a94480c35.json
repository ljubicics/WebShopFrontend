{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mapActions, mapState } from \"vuex\";\nexport default {\n  name: \"Cart\",\n  props: {\n    cart: Object\n  },\n  data() {\n    return {\n      cc: null\n    };\n  },\n  computed: {\n    ...mapState([\"token\", \"currCart\"])\n  },\n  methods: {\n    ...mapActions([\"getToken\", \"getCart\", \"removeGameFromCart\", \"addReceipt\"]),\n    calcTotal(games) {\n      let total = 0;\n      games.forEach(gInCart => {\n        total += gInCart.price;\n      });\n      return total.toFixed(2);\n    },\n    removeFromCart(game, thiscart) {\n      console.log(JSON.stringify(game) + \" removed\");\n      let token = localStorage.token;\n      let payload = token.split(\".\")[1];\n      let user = JSON.parse(atob(payload));\n      const obj = {\n        game: game,\n        cart: thiscart,\n        user: user\n      };\n      this.removeGameFromCart(obj);\n      let c;\n      this.getCart(user).then(res => {\n        c = res;\n        console.log(\"RES \" + JSON.stringify(res));\n        document.getElementById(\"totalDiv\").innerHTML = \"\";\n        let t = (res.to_pay - game.price).toFixed(2);\n        if (t <= 0) t = 0;\n        document.getElementById(\"totalDiv\").innerHTML += `\n           <b> Total: ${(res.to_pay - game.price).toFixed(2).toString()} </b>\n            `;\n      });\n      this.$forceUpdate();\n\n      //namesteno trenutno da radi sa reload-om,\n      //TODO: namestiti da radi i bez reload-a\n      //location.reload();\n    },\n\n    createReceipt(cart) {\n      let token = localStorage.token;\n      let payload = token.split(\".\")[1];\n      let user = JSON.parse(atob(payload));\n      const rcpInfo = {\n        cart: cart,\n        user: user\n      };\n      console.log(\"pozivam addrcp iz view-a\");\n      this.addReceipt(rcpInfo);\n      this.$router.push({\n        name: \"Receipts\"\n      });\n    }\n  },\n  mounted() {}\n};","map":{"version":3,"mappings":";;AACA;AAEA;EACAA;EAEAC;IACAC;EACA;EAEAC;IACA;MACAC;IACA;EACA;EAEAC;IACA;EACA;EAEAC;IACA;IACAC;MACA;MACAC;QACAC;MACA;MACA;IACA;IACAC;MACAC;MACA;MACA;MACA;MACA;QACAC;QACAV;QACAW;MACA;MACA;MACA;MACA;QACAC;QACAH;QACAI;QACA;QACA;QACAA;AACA;AACA;MACA;MACA;;MAEA;MACA;MACA;IACA;;IACAC;MACA;MACA;MACA;MACA;QACAd;QACAW;MACA;MACAF;MACA;MACA;QAAAX;MAAA;IACA;EACA;EACAiB;AACA","names":["name","props","cart","data","cc","computed","methods","calcTotal","games","total","removeFromCart","console","game","user","c","document","createReceipt","mounted"],"sourceRoot":"src/components","sources":["Cart.vue"],"sourcesContent":["<script>\nimport { mapActions, mapState } from \"vuex\";\n\nexport default {\n  name: \"Cart\",\n\n  props: {\n    cart: Object,\n  },\n\n  data() {\n    return {\n      cc: null,\n    };\n  },\n\n  computed: {\n    ...mapState([\"token\", \"currCart\"]),\n  },\n\n  methods: {\n    ...mapActions([\"getToken\", \"getCart\", \"removeGameFromCart\", \"addReceipt\"]),\n    calcTotal(games) {\n      let total = 0;\n      games.forEach((gInCart) => {\n        total += gInCart.price;\n      });\n      return total.toFixed(2);\n    },\n    removeFromCart(game, thiscart) {\n      console.log(JSON.stringify(game) + \" removed\");\n      let token = localStorage.token;\n      let payload = token.split(\".\")[1];\n      let user = JSON.parse(atob(payload));\n      const obj = {\n        game: game,\n        cart: thiscart,\n        user: user,\n      };\n      this.removeGameFromCart(obj);\n      let c;\n      this.getCart(user).then((res) => {\n        c = res;\n        console.log(\"RES \" + JSON.stringify(res));\n        document.getElementById(\"totalDiv\").innerHTML = \"\";\n        let t = (res.to_pay - game.price).toFixed(2);\n        if (t <= 0) t = 0;\n        document.getElementById(\"totalDiv\").innerHTML += `\n           <b> Total: ${(res.to_pay - game.price).toFixed(2).toString()} </b>\n            `;\n      });\n      this.$forceUpdate();\n\n      //namesteno trenutno da radi sa reload-om,\n      //TODO: namestiti da radi i bez reload-a\n      //location.reload();\n    },\n    createReceipt(cart) {\n      let token = localStorage.token;\n      let payload = token.split(\".\")[1];\n      let user = JSON.parse(atob(payload));\n      const rcpInfo = {\n        cart: cart,\n        user: user,\n      };\n      console.log(\"pozivam addrcp iz view-a\");\n      this.addReceipt(rcpInfo);\n      this.$router.push({ name: \"Receipts\" });\n    },\n  },\n  mounted() {},\n};\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}