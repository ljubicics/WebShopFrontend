{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from \"vue\";\nimport Vuex from \"vuex\";\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    products: [],\n    productTypes: [],\n    token: \"\"\n  },\n  mutations: {\n    addProducts(state, product) {\n      state.products = product;\n    },\n    addOndProduct(state, product) {\n      state.products.push(product);\n    },\n    addProductTypes(state, productType) {\n      state.productTypes.push(productType);\n    },\n    setProductTypes(state, productTypes) {\n      state.productTypes = productTypes;\n    },\n    setToken(state, token) {\n      state.token = token;\n      localStorage.token = token;\n    },\n    removeToken(state) {\n      state.token = \"\";\n      localStorage.token = \"\";\n    },\n    getToken() {\n      return localStorage.token;\n    }\n  },\n  actions: {\n    login: function ({\n      commit\n    }, obj) {\n      fetch(\"http://localhost:9000/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(obj)\n      }).then(res => res.json()).then(tkn => {\n        console.log(tkn.token);\n        if (tkn.msg) {\n          alert(tkn.msg);\n          return tkn.msg;\n        } else {\n          commit(\"setToken\", tkn.token);\n        }\n      });\n    },\n    register: function ({\n      commit\n    }, obj) {\n      fetch(\"http://localhost:9000/register\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(obj)\n      }).then(res => res.json()).then(tkn => {\n        if (tkn.msg) {\n          alert(tkn.msg);\n          return;\n        } else {\n          commit(\"setToken\", tkn.token);\n        }\n      });\n    },\n    fetchProducts({\n      commit\n    }) {\n      fetch(\"http://localhost:8000/admin/products/\", {\n        method: \"GET\"\n      }).then(obj => obj.json()).then(res => {\n        commit(\"addProducts\", res.data);\n      });\n    },\n    fetchProductTypes({\n      commit\n    }) {\n      fetch(\"http://localhost:8000/admin/productTypes/\", {\n        method: \"GET\"\n      }).then(obj => obj.json()).then(res => {\n        res.data.forEach(el => {\n          fetch(`http://localhost:8000/admin/products/byType/${el.id}`).then(obj2 => obj2.json()).then(data => {\n            el[\"productsForType\"] = data;\n          });\n        });\n        commit(\"setProductTypes\", res.data);\n      });\n    },\n    fetchReviews({\n      commit\n    }) {\n      fetch(\"http://localhost:8000/admin/reviews/\", {\n        method: \"GET\"\n      }).then;\n    },\n    getProduct({\n      commit,\n      state\n    }, id) {\n      return new Promise((resolve, reject) => {\n        const product = state.products.filter(prod => prod.id == id)[0];\n        if (product) {\n          resolve(product);\n        } else {\n          fetch(`https://localhost:8000/admin/products/${id}`).then(obj => obj.json()).then(res => {\n            commit(\"addProduct\", res.data);\n            resolve(res.data);\n          });\n        }\n      });\n    }\n  }\n});","map":{"version":3,"names":["Vue","Vuex","use","Store","state","products","productTypes","token","mutations","addProducts","product","addOndProduct","push","addProductTypes","productType","setProductTypes","setToken","localStorage","removeToken","getToken","actions","login","commit","obj","fetch","method","headers","body","JSON","stringify","then","res","json","tkn","console","log","msg","alert","register","fetchProducts","data","fetchProductTypes","forEach","el","id","obj2","fetchReviews","getProduct","Promise","resolve","reject","filter","prod"],"sources":["/Users/strahinja/github-classroom/Skript-2022-23/frontend-vuejs-petar-strahinja-ljubicicRN71-20/frontend/src/store/index.js"],"sourcesContent":["import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    products: [],\n    productTypes: [],\n    token: \"\",\n  },\n  mutations: {\n    addProducts(state, product) {\n      state.products = product;\n    },\n    addOndProduct(state, product) {\n      state.products.push(product);\n    },\n    addProductTypes(state, productType) {\n      state.productTypes.push(productType);\n    },\n    setProductTypes(state, productTypes) {\n      state.productTypes = productTypes;\n    },\n    setToken(state, token) {\n      state.token = token;\n      localStorage.token = token;\n    },\n    removeToken(state) {\n      state.token = \"\";\n      localStorage.token = \"\";\n    },\n    getToken() {\n      return localStorage.token;\n    },\n  },\n  actions: {\n    login: function ({ commit }, obj) {\n      fetch(\"http://localhost:9000/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(obj),\n      })\n        .then((res) => res.json())\n        .then((tkn) => {\n          console.log(tkn.token);\n          if (tkn.msg) {\n            alert(tkn.msg);\n            return tkn.msg;\n          } else {\n            commit(\"setToken\", tkn.token);\n          }\n        });\n    },\n    register: function ({ commit }, obj) {\n      fetch(\"http://localhost:9000/register\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(obj),\n      })\n        .then((res) => res.json())\n        .then((tkn) => {\n          if (tkn.msg) {\n            alert(tkn.msg);\n            return;\n          } else {\n            commit(\"setToken\", tkn.token);\n          }\n        });\n    },\n    fetchProducts({ commit }) {\n      fetch(\"http://localhost:8000/admin/products/\", {\n        method: \"GET\",\n      })\n        .then((obj) => obj.json())\n        .then((res) => {\n          commit(\"addProducts\", res.data);\n        });\n    },\n    fetchProductTypes({ commit }) {\n      fetch(\"http://localhost:8000/admin/productTypes/\", {\n        method: \"GET\",\n      })\n        .then((obj) => obj.json())\n        .then((res) => {\n          res.data.forEach((el) => {\n            fetch(`http://localhost:8000/admin/products/byType/${el.id}`)\n              .then((obj2) => obj2.json())\n              .then((data) => {\n                el[\"productsForType\"] = data;\n              });\n          });\n          commit(\"setProductTypes\", res.data);\n        });\n    },\n    fetchReviews({ commit }) {\n      fetch(\"http://localhost:8000/admin/reviews/\", {\n        method: \"GET\",\n      }).then;\n    },\n    getProduct({ commit, state }, id) {\n      return new Promise((resolve, reject) => {\n        const product = state.products.filter((prod) => prod.id == id)[0];\n\n        if (product) {\n          resolve(product);\n        } else {\n          fetch(`https://localhost:8000/admin/products/${id}`)\n            .then((obj) => obj.json())\n            .then((res) => {\n              commit(\"addProduct\", res.data);\n              resolve(res.data);\n            });\n        }\n      });\n    },\n  },\n});\n"],"mappings":";AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,IAAI,MAAM,MAAM;AAEvBD,GAAG,CAACE,GAAG,CAACD,IAAI,CAAC;AAEb,eAAe,IAAIA,IAAI,CAACE,KAAK,CAAC;EAC5BC,KAAK,EAAE;IACLC,QAAQ,EAAE,EAAE;IACZC,YAAY,EAAE,EAAE;IAChBC,KAAK,EAAE;EACT,CAAC;EACDC,SAAS,EAAE;IACTC,WAAW,CAACL,KAAK,EAAEM,OAAO,EAAE;MAC1BN,KAAK,CAACC,QAAQ,GAAGK,OAAO;IAC1B,CAAC;IACDC,aAAa,CAACP,KAAK,EAAEM,OAAO,EAAE;MAC5BN,KAAK,CAACC,QAAQ,CAACO,IAAI,CAACF,OAAO,CAAC;IAC9B,CAAC;IACDG,eAAe,CAACT,KAAK,EAAEU,WAAW,EAAE;MAClCV,KAAK,CAACE,YAAY,CAACM,IAAI,CAACE,WAAW,CAAC;IACtC,CAAC;IACDC,eAAe,CAACX,KAAK,EAAEE,YAAY,EAAE;MACnCF,KAAK,CAACE,YAAY,GAAGA,YAAY;IACnC,CAAC;IACDU,QAAQ,CAACZ,KAAK,EAAEG,KAAK,EAAE;MACrBH,KAAK,CAACG,KAAK,GAAGA,KAAK;MACnBU,YAAY,CAACV,KAAK,GAAGA,KAAK;IAC5B,CAAC;IACDW,WAAW,CAACd,KAAK,EAAE;MACjBA,KAAK,CAACG,KAAK,GAAG,EAAE;MAChBU,YAAY,CAACV,KAAK,GAAG,EAAE;IACzB,CAAC;IACDY,QAAQ,GAAG;MACT,OAAOF,YAAY,CAACV,KAAK;IAC3B;EACF,CAAC;EACDa,OAAO,EAAE;IACPC,KAAK,EAAE,UAAU;MAAEC;IAAO,CAAC,EAAEC,GAAG,EAAE;MAChCC,KAAK,CAAC,6BAA6B,EAAE;QACnCC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACN,GAAG;MAC1B,CAAC,CAAC,CACCO,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,EAAE,CAAC,CACzBF,IAAI,CAAEG,GAAG,IAAK;QACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC1B,KAAK,CAAC;QACtB,IAAI0B,GAAG,CAACG,GAAG,EAAE;UACXC,KAAK,CAACJ,GAAG,CAACG,GAAG,CAAC;UACd,OAAOH,GAAG,CAACG,GAAG;QAChB,CAAC,MAAM;UACLd,MAAM,CAAC,UAAU,EAAEW,GAAG,CAAC1B,KAAK,CAAC;QAC/B;MACF,CAAC,CAAC;IACN,CAAC;IACD+B,QAAQ,EAAE,UAAU;MAAEhB;IAAO,CAAC,EAAEC,GAAG,EAAE;MACnCC,KAAK,CAAC,gCAAgC,EAAE;QACtCC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACN,GAAG;MAC1B,CAAC,CAAC,CACCO,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,EAAE,CAAC,CACzBF,IAAI,CAAEG,GAAG,IAAK;QACb,IAAIA,GAAG,CAACG,GAAG,EAAE;UACXC,KAAK,CAACJ,GAAG,CAACG,GAAG,CAAC;UACd;QACF,CAAC,MAAM;UACLd,MAAM,CAAC,UAAU,EAAEW,GAAG,CAAC1B,KAAK,CAAC;QAC/B;MACF,CAAC,CAAC;IACN,CAAC;IACDgC,aAAa,CAAC;MAAEjB;IAAO,CAAC,EAAE;MACxBE,KAAK,CAAC,uCAAuC,EAAE;QAC7CC,MAAM,EAAE;MACV,CAAC,CAAC,CACCK,IAAI,CAAEP,GAAG,IAAKA,GAAG,CAACS,IAAI,EAAE,CAAC,CACzBF,IAAI,CAAEC,GAAG,IAAK;QACbT,MAAM,CAAC,aAAa,EAAES,GAAG,CAACS,IAAI,CAAC;MACjC,CAAC,CAAC;IACN,CAAC;IACDC,iBAAiB,CAAC;MAAEnB;IAAO,CAAC,EAAE;MAC5BE,KAAK,CAAC,2CAA2C,EAAE;QACjDC,MAAM,EAAE;MACV,CAAC,CAAC,CACCK,IAAI,CAAEP,GAAG,IAAKA,GAAG,CAACS,IAAI,EAAE,CAAC,CACzBF,IAAI,CAAEC,GAAG,IAAK;QACbA,GAAG,CAACS,IAAI,CAACE,OAAO,CAAEC,EAAE,IAAK;UACvBnB,KAAK,CAAE,+CAA8CmB,EAAE,CAACC,EAAG,EAAC,CAAC,CAC1Dd,IAAI,CAAEe,IAAI,IAAKA,IAAI,CAACb,IAAI,EAAE,CAAC,CAC3BF,IAAI,CAAEU,IAAI,IAAK;YACdG,EAAE,CAAC,iBAAiB,CAAC,GAAGH,IAAI;UAC9B,CAAC,CAAC;QACN,CAAC,CAAC;QACFlB,MAAM,CAAC,iBAAiB,EAAES,GAAG,CAACS,IAAI,CAAC;MACrC,CAAC,CAAC;IACN,CAAC;IACDM,YAAY,CAAC;MAAExB;IAAO,CAAC,EAAE;MACvBE,KAAK,CAAC,sCAAsC,EAAE;QAC5CC,MAAM,EAAE;MACV,CAAC,CAAC,CAACK,IAAI;IACT,CAAC;IACDiB,UAAU,CAAC;MAAEzB,MAAM;MAAElB;IAAM,CAAC,EAAEwC,EAAE,EAAE;MAChC,OAAO,IAAII,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtC,MAAMxC,OAAO,GAAGN,KAAK,CAACC,QAAQ,CAAC8C,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACR,EAAE,IAAIA,EAAE,CAAC,CAAC,CAAC,CAAC;QAEjE,IAAIlC,OAAO,EAAE;UACXuC,OAAO,CAACvC,OAAO,CAAC;QAClB,CAAC,MAAM;UACLc,KAAK,CAAE,yCAAwCoB,EAAG,EAAC,CAAC,CACjDd,IAAI,CAAEP,GAAG,IAAKA,GAAG,CAACS,IAAI,EAAE,CAAC,CACzBF,IAAI,CAAEC,GAAG,IAAK;YACbT,MAAM,CAAC,YAAY,EAAES,GAAG,CAACS,IAAI,CAAC;YAC9BS,OAAO,CAAClB,GAAG,CAACS,IAAI,CAAC;UACnB,CAAC,CAAC;QACN;MACF,CAAC,CAAC;IACJ;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}