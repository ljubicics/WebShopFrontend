{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mapActions, mapState } from \"vuex\";\nexport default {\n  name: \"SingleProduct\",\n  props: {\n    product: Object\n  },\n  data() {\n    return {\n      currProduct: null,\n      reviews: null,\n      averageScore: 0\n    };\n  },\n  created() {\n    this.currProduct = this.product;\n  },\n  computed: {\n    ...mapState([\"token\"]),\n    ...mapActions([\"getProduct\", \"addProductToCart\"])\n  },\n  methods: {\n    addToCart(product) {\n      let token = localStorage.token;\n      let payload = token.split(\".\")[1];\n      let user = JSON.parse(atob(payload));\n      const obj = {\n        userID: user.id,\n        productID: this.currProduct.id,\n        cart_item_quantity: 1\n      };\n      this.addProductToCart(obj);\n      return;\n    }\n  },\n  mounted() {\n    let token = localStorage.token;\n    if (token === \"\") {\n      alert(\"NOT SIGNED IN\");\n      this.$router.push({\n        name: \"products\"\n      });\n      return;\n    } else {\n      this.reviews = this.currProduct.reviewsForProduct;\n      let counter = 0;\n      let avg = 0;\n      this.reviews.forEach(el => {\n        counter++;\n        avg += el.review_rating;\n      });\n      this.averageScore = avg / counter;\n    }\n  }\n};","map":{"version":3,"mappings":";;AA0BA;AACA;EACAA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;QACAC;QACAC;QACAC;MACA;MACA;MACA;IACA;EACA;EACAC;IACA;IACA;MACAC;MACA;QAAAf;MAAA;MACA;IACA;MACA;MACA;MACA;MACA;QACAgB;QACAC;MACA;MACA;IACA;EACA;AACA","names":["name","props","product","data","currProduct","reviews","averageScore","created","computed","methods","addToCart","userID","productID","cart_item_quantity","mounted","alert","counter","avg"],"sourceRoot":"src/components","sources":["SingleProduct.vue"],"sourcesContent":["<template>\n  <div class=\"singleproduct\">\n    <h3>{{ currProduct.product_name }}</h3>\n    <div v-if=\"product.image_url == 'slika'\" id=\"image\">IMAGE NOT AVALIABLE</div>\n    <ul>\n      <li>PRICE: {{ product.product_price }}</li>\n      <li>DESCRIPTION: {{ product.product_description }}</li>\n      <li>AVERAGE SCORE: {{ this.averageScore }}</li>\n      <li>\n        Reviews:\n        <ul v-for=\"rev in reviews\">\n          <li>Review Title: {{ rev.review_title }}</li>\n          <li>Review Text: {{ rev.review_text }}</li>\n          <li>Review Rating: {{ rev.review_rating }}</li>\n        </ul>\n      </li>\n    </ul>\n    <div id=\"buttons\">\n      <b-button-group>\n        <b-button variant=\"dark\" id=\"addToCart\" @click=\"addToCart(currProduct)\">Add to cart</b-button>\n      </b-button-group>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState } from \"vuex\";\nexport default {\n  name: \"SingleProduct\",\n  props: {\n    product: Object,\n  },\n  data() {\n    return {\n      currProduct: null,\n      reviews: null,\n      averageScore: 0,\n    };\n  },\n  created() {\n    this.currProduct = this.product;\n  },\n  computed: {\n    ...mapState([\"token\"]),\n    ...mapActions([\"getProduct\", \"addProductToCart\"]),\n  },\n  methods: {\n    addToCart(product) {\n      let token = localStorage.token;\n      let payload = token.split(\".\")[1];\n      let user = JSON.parse(atob(payload));\n      const obj = {\n        userID: user.id,\n        productID: this.currProduct.id,\n        cart_item_quantity: 1,\n      };\n      this.addProductToCart(obj);\n      return;\n    },\n  },\n  mounted() {\n    let token = localStorage.token;\n    if (token === \"\") {\n      alert(\"NOT SIGNED IN\");\n      this.$router.push({ name: \"products\" });\n      return;\n    } else {\n      this.reviews = this.currProduct.reviewsForProduct;\n      let counter = 0;\n      let avg = 0;\n      this.reviews.forEach((el) => {\n        counter++;\n        avg += el.review_rating;\n      });\n      this.averageScore = avg / counter;\n    }\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}