{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from \"vue\";\nimport Vuex from \"vuex\";\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    products: [],\n    productTypes: [],\n    token: \"\",\n    reviews: []\n  },\n  mutations: {\n    addProducts(state, product) {\n      state.products = product;\n    },\n    addOndProduct(state, product) {\n      state.products.push(product);\n    },\n    addProductTypes(state, productType) {\n      state.productTypes.push(productType);\n    },\n    setProductTypes(state, productTypes) {\n      state.productTypes = productTypes;\n    },\n    setReviews(state, reviews) {\n      state.reviews = reviews;\n    },\n    setCurrCart(state, cart) {\n      state.currCart = cart;\n    },\n    setToken(state, token) {\n      state.token = token;\n      localStorage.token = token;\n    },\n    removeToken(state) {\n      state.token = \"\";\n      localStorage.token = \"\";\n    },\n    getToken() {\n      return localStorage.token;\n    }\n  },\n  actions: {\n    login: function ({\n      commit\n    }, obj) {\n      fetch(\"http://localhost:9000/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(obj)\n      }).then(res => res.json()).then(tkn => {\n        console.log(tkn.token);\n        if (tkn.msg) {\n          alert(tkn.msg);\n          return tkn.msg;\n        } else {\n          commit(\"setToken\", tkn.token);\n        }\n      });\n    },\n    register: function ({\n      commit\n    }, obj) {\n      fetch(\"http://localhost:9000/register\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(obj)\n      }).then(res => res.json()).then(tkn => {\n        if (tkn.msg) {\n          alert(tkn.msg);\n          return;\n        } else {\n          commit(\"setToken\", tkn.token);\n        }\n      });\n    },\n    fetchProducts({\n      commit\n    }) {\n      fetch(\"http://localhost:8000/admin/products/\", {\n        method: \"GET\"\n      }).then(obj => obj.json()).then(res => {\n        res.data.forEach(el => {\n          fetch(`http://localhost:8000/admin/reviews/${el.id}`).then(obj2 => obj2.json()).then(res2 => {\n            el[\"reviewsForProduct\"] = res2.data;\n          });\n        });\n        commit(\"addProducts\", res.data);\n      });\n    },\n    fetchProductTypes({\n      commit\n    }) {\n      fetch(\"http://localhost:8000/admin/productTypes/\", {\n        method: \"GET\"\n      }).then(obj => obj.json()).then(res => {\n        res.data.forEach(el => {\n          fetch(`http://localhost:8000/admin/products/byType/${el.id}`).then(obj2 => obj2.json()).then(data => {\n            el[\"productsForType\"] = data;\n          });\n        });\n        commit(\"setProductTypes\", res.data);\n      });\n    },\n    fetchReviews({\n      commit\n    }) {\n      fetch(\"http://localhost:8000/admin/reviews/\", {\n        method: \"GET\"\n      }).then(obj => obj.json()).then(res => {\n        commit(\"setReviews\", res.data);\n      });\n    },\n    getProduct({\n      commit,\n      state\n    }, id) {\n      return new Promise((resolve, reject) => {\n        const product = state.products.filter(prod => prod.id == id)[0];\n        if (product) {\n          resolve(product);\n        } else {\n          fetch(`https://localhost:8000/admin/products/${id}`).then(obj => obj.json()).then(res => {\n            commit(\"addProduct\", res.data);\n            resolve(res.data);\n          });\n        }\n      });\n    },\n    addProductToCart: function ({\n      dispatch,\n      state\n    }, obj) {\n      console.log(obj);\n      const itemBody = {\n        userID: obj.userID,\n        productID: obj.productID,\n        cart_item_quantity: obj.cart_item_quantity\n      };\n      fetch(\"http://localhost:8000/admin/cart/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${state.token}`\n        },\n        body: JSON.stringify(itemBody)\n      }).then(res => res.json()).then(data => {});\n      return;\n    },\n    getCart: function ({\n      commit,\n      state\n    }, id) {\n      return new Promise((resolve, reject) => {\n        fetch(\"http://localhost:8000/admin/cart/\", {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${state.token}`\n          }\n        }).then(obj => obj.json()).then(res => {\n          let items = [];\n          console.log(res);\n          res.data.forEach(el => {\n            if (el.userID == id) {\n              items.push(el);\n            }\n          });\n          commit(\"setCurrCart\", items);\n          console.log(items);\n          resolve(items);\n        });\n      });\n    }\n  }\n});","map":{"version":3,"names":["Vue","Vuex","use","Store","state","products","productTypes","token","reviews","mutations","addProducts","product","addOndProduct","push","addProductTypes","productType","setProductTypes","setReviews","setCurrCart","cart","currCart","setToken","localStorage","removeToken","getToken","actions","login","commit","obj","fetch","method","headers","body","JSON","stringify","then","res","json","tkn","console","log","msg","alert","register","fetchProducts","data","forEach","el","id","obj2","res2","fetchProductTypes","fetchReviews","getProduct","Promise","resolve","reject","filter","prod","addProductToCart","dispatch","itemBody","userID","productID","cart_item_quantity","Authorization","getCart","items"],"sources":["/Users/strahinja/github-classroom/Skript-2022-23/frontend-vuejs-petar-strahinja-ljubicicRN71-20/frontend/src/store/index.js"],"sourcesContent":["import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    products: [],\n    productTypes: [],\n    token: \"\",\n    reviews: [],\n  },\n  mutations: {\n    addProducts(state, product) {\n      state.products = product;\n    },\n    addOndProduct(state, product) {\n      state.products.push(product);\n    },\n    addProductTypes(state, productType) {\n      state.productTypes.push(productType);\n    },\n    setProductTypes(state, productTypes) {\n      state.productTypes = productTypes;\n    },\n    setReviews(state, reviews) {\n      state.reviews = reviews;\n    },\n    setCurrCart(state, cart) {\n      state.currCart = cart;\n    },\n    setToken(state, token) {\n      state.token = token;\n      localStorage.token = token;\n    },\n    removeToken(state) {\n      state.token = \"\";\n      localStorage.token = \"\";\n    },\n    getToken() {\n      return localStorage.token;\n    },\n  },\n  actions: {\n    login: function ({ commit }, obj) {\n      fetch(\"http://localhost:9000/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(obj),\n      })\n        .then((res) => res.json())\n        .then((tkn) => {\n          console.log(tkn.token);\n          if (tkn.msg) {\n            alert(tkn.msg);\n            return tkn.msg;\n          } else {\n            commit(\"setToken\", tkn.token);\n          }\n        });\n    },\n    register: function ({ commit }, obj) {\n      fetch(\"http://localhost:9000/register\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(obj),\n      })\n        .then((res) => res.json())\n        .then((tkn) => {\n          if (tkn.msg) {\n            alert(tkn.msg);\n            return;\n          } else {\n            commit(\"setToken\", tkn.token);\n          }\n        });\n    },\n    fetchProducts({ commit }) {\n      fetch(\"http://localhost:8000/admin/products/\", {\n        method: \"GET\",\n      })\n        .then((obj) => obj.json())\n        .then((res) => {\n          res.data.forEach((el) => {\n            fetch(`http://localhost:8000/admin/reviews/${el.id}`)\n              .then((obj2) => obj2.json())\n              .then((res2) => {\n                el[\"reviewsForProduct\"] = res2.data;\n              });\n          });\n          commit(\"addProducts\", res.data);\n        });\n    },\n    fetchProductTypes({ commit }) {\n      fetch(\"http://localhost:8000/admin/productTypes/\", {\n        method: \"GET\",\n      })\n        .then((obj) => obj.json())\n        .then((res) => {\n          res.data.forEach((el) => {\n            fetch(`http://localhost:8000/admin/products/byType/${el.id}`)\n              .then((obj2) => obj2.json())\n              .then((data) => {\n                el[\"productsForType\"] = data;\n              });\n          });\n          commit(\"setProductTypes\", res.data);\n        });\n    },\n    fetchReviews({ commit }) {\n      fetch(\"http://localhost:8000/admin/reviews/\", {\n        method: \"GET\",\n      })\n        .then((obj) => obj.json())\n        .then((res) => {\n          commit(\"setReviews\", res.data);\n        });\n    },\n    getProduct({ commit, state }, id) {\n      return new Promise((resolve, reject) => {\n        const product = state.products.filter((prod) => prod.id == id)[0];\n\n        if (product) {\n          resolve(product);\n        } else {\n          fetch(`https://localhost:8000/admin/products/${id}`)\n            .then((obj) => obj.json())\n            .then((res) => {\n              commit(\"addProduct\", res.data);\n              resolve(res.data);\n            });\n        }\n      });\n    },\n    addProductToCart: function ({ dispatch, state }, obj) {\n      console.log(obj);\n      const itemBody = {\n        userID: obj.userID,\n        productID: obj.productID,\n        cart_item_quantity: obj.cart_item_quantity,\n      };\n      fetch(\"http://localhost:8000/admin/cart/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${state.token}`,\n        },\n        body: JSON.stringify(itemBody),\n      })\n        .then((res) => res.json())\n        .then((data) => {});\n      return;\n    },\n    getCart: function ({ commit, state }, id) {\n      return new Promise((resolve, reject) => {\n        fetch(\"http://localhost:8000/admin/cart/\", {\n          method: \"GET\",\n          headers: { Authorization: `Bearer ${state.token}` },\n        })\n          .then((obj) => obj.json())\n          .then((res) => {\n            let items = [];\n            console.log(res);\n            res.data.forEach((el) => {\n              if (el.userID == id) {\n                items.push(el);\n              }\n            });\n            commit(\"setCurrCart\", items);\n            console.log(items);\n            resolve(items);\n          });\n      });\n    },\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}